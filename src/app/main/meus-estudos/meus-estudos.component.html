<div class="main-container">
  <header class="main-header">
    <img src="assets/logo_icon.png" alt="Logo OnWayStudy" class="header-logo" />
    <div class="main-title">OnWayStudy</div>
    <div class="user-actions">
      <button mat-icon-button matTooltip="Sair">
        <mat-icon>logout</mat-icon>
      </button>
    </div>
  </header>

  <main class="content-area">
    <div class="table-header">
      <h1>Minhas Atividades</h1>
      <div class="header-buttons">
        <button mat-flat-button color="accent" (click)="cadastrarDisciplina()">
          <mat-icon>class</mat-icon>
          Cadastrar Disciplina
        </button>
        <button mat-flat-button color="primary" (click)="cadastrarAtividade()">
          <mat-icon>add_task</mat-icon>
          Cadastrar Atividade
        </button>
      </div>
    </div>

    <app-filtros-tabela
      [disciplinas]="disciplinasCadastradas"
      [statusOptions]="statusOptions"
      (filterChange)="onFilterChange($event)"
    >
    </app-filtros-tabela>

    <div class="table-container mat-elevation-z8">
      <table mat-table [dataSource]="dataSource" matSort>
        <ng-container matColumnDef="disciplina">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Disciplina</th>
          <td mat-cell *matCellDef="let row">{{ row.disciplina }}</td>
        </ng-container>
        <ng-container matColumnDef="atividade">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Atividade</th>
          <td mat-cell *matCellDef="let row">{{ row.atividade }}</td>
        </ng-container>
        <ng-container matColumnDef="data">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Data</th>
          <td mat-cell *matCellDef="let row">
            {{ row.data | date : "dd/MM/yyyy" }}
          </td>
        </ng-container>

        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
          <td mat-cell *matCellDef="let row">
            <span
              class="status-badge"
              [ngClass]="row.status.toLowerCase().replace(' ', '-')"
              (click)="trocarStatus(row)"
              matTooltip="Clique para alterar o status"
            >
              {{ row.status }}
            </span>
          </td>
        </ng-container>

        <ng-container matColumnDef="peso">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Peso</th>
          <td mat-cell *matCellDef="let row">
            {{ row.peso !== null ? row.peso : "N/A" }}
          </td>
        </ng-container>
        <ng-container matColumnDef="resultado">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Resultado</th>
          <td mat-cell *matCellDef="let row">
            {{ row.resultado !== null ? row.resultado : "N/A" }}
          </td>
        </ng-container>

        <ng-container matColumnDef="acoes">
          <th mat-header-cell *matHeaderCellDef>Ações</th>
          <td mat-cell *matCellDef="let row">
            <button
              mat-icon-button
              color="primary"
              (click)="editarAtividade(row)"
              matTooltip="Editar Atividade"
            >
              <mat-icon>edit</mat-icon>
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>

      <mat-paginator
        [pageSizeOptions]="[5, 10, 25, 100]"
        [pageSize]="5"
      ></mat-paginator>
    </div>
  </main>
</div>
